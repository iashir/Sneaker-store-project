{"ast":null,"code":"const {\n  User\n} = require(\"../models/User\");\n\nlet auth = (req, res, next) => {\n  let token = req.cookies.w_auth;\n  User.findByToken(token, (err, user) => {\n    if (err || !user) {\n      return res.json({\n        isAuth: false,\n        error: true\n      });\n    }\n\n    req.token = token;\n    req.user = user;\n    next();\n  });\n};\n\nmodule.exports = {\n  auth\n};","map":{"version":3,"sources":["/Users/iashir/Desktop/WorkProjects/Store/middleware/auth.js"],"names":["User","require","auth","req","res","next","token","cookies","w_auth","findByToken","err","user","json","isAuth","error","module","exports"],"mappings":"AAAA,MAAM;AAAEA,EAAAA;AAAF,IAAWC,OAAO,CAAC,gBAAD,CAAxB;;AAEA,IAAIC,IAAI,GAAG,CAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,KAAoB;AAC7B,MAAIC,KAAK,GAAGH,GAAG,CAACI,OAAJ,CAAYC,MAAxB;AACAR,EAAAA,IAAI,CAACS,WAAL,CAAiBH,KAAjB,EAAwB,CAACI,GAAD,EAAMC,IAAN,KAAe;AACrC,QAAID,GAAG,IAAI,CAACC,IAAZ,EAAkB;AAChB,aAAOP,GAAG,CAACQ,IAAJ,CAAS;AACdC,QAAAA,MAAM,EAAE,KADM;AAEdC,QAAAA,KAAK,EAAE;AAFO,OAAT,CAAP;AAID;;AAEDX,IAAAA,GAAG,CAACG,KAAJ,GAAYA,KAAZ;AACAH,IAAAA,GAAG,CAACQ,IAAJ,GAAWA,IAAX;AACAN,IAAAA,IAAI;AACL,GAXD;AAYD,CAdD;;AAgBAU,MAAM,CAACC,OAAP,GAAiB;AAAEd,EAAAA;AAAF,CAAjB","sourcesContent":["const { User } = require(\"../models/User\");\n\nlet auth = (req, res, next) => {\n  let token = req.cookies.w_auth;\n  User.findByToken(token, (err, user) => {\n    if (err || !user) {\n      return res.json({\n        isAuth: false,\n        error: true,\n      });\n    }\n\n    req.token = token;\n    req.user = user;\n    next();\n  });\n};\n\nmodule.exports = { auth };\n"]},"metadata":{},"sourceType":"script"}