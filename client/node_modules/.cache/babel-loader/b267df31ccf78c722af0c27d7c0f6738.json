{"ast":null,"code":"var _jsxFileName = \"/Users/iashir/Desktop/WorkProjects/Store/client/src/components/views/CartPage/CartPage.js\";\nimport React, { useEffect, useState } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { getCartItems, removeCartItem, onSuccessBuy, addToCart } from \"../../../_actions/user_actions\";\nimport UserCardBlock from \"./Sections/UserCardBlock\";\nimport { Result, Empty, InputNumber } from \"antd\";\nimport Axios from \"axios\";\nimport Paypal from \"../../utils/Paypal\";\n\nfunction CartPage(props) {\n  const dispatch = useDispatch();\n  const [Total, setTotal] = useState(0);\n  const [ShowTotal, setShowTotal] = useState(false);\n  const [ShowSuccess, setShowSuccess] = useState(false);\n  useEffect(() => {\n    let cartItems = [];\n\n    if (props.user.userData && props.user.userData.cart) {\n      if (props.user.userData.cart.length > 0) {\n        props.user.userData.cart.forEach(item => {\n          cartItems.push(item.id);\n        });\n        dispatch(getCartItems(cartItems, props.user.userData.cart)).then(response => {\n          if (response.payload.length > 0) {\n            calculateTotal(response.payload);\n          }\n        });\n      }\n    }\n  }, [props.user.userData]);\n\n  const calculateTotal = cartDetail => {\n    let total = 0;\n    cartDetail.map(item => {\n      total += parseInt(item.price, 10) * item.quantity;\n    });\n    setTotal(total);\n    setShowTotal(true);\n  };\n\n  const removeFromCart = productId => {\n    dispatch(removeCartItem(productId)).then(response => {\n      if (response.payload.cartDetail.length <= 0) {\n        setShowTotal(false);\n      } else {\n        calculateTotal(response.payload.cartDetail);\n      }\n    });\n  };\n\n  const transactionSuccess = data => {\n    dispatch(onSuccessBuy({\n      cartDetail: props.user.cartDetail,\n      paymentData: data\n    })).then(response => {\n      if (response.payload.success) {\n        setShowSuccess(true);\n        setShowTotal(false);\n      }\n    });\n  };\n\n  const transactionError = () => {\n    console.log(\"Paypal error\");\n  };\n\n  const transactionCanceled = () => {\n    console.log(\"Transaction canceled\");\n  };\n\n  const handleQuantity = value => {\n    dispatch(addToCart);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      width: \"85%\",\n      margin: \"3rem auto\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }\n  }, \"My Cart\"), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(UserCardBlock, {\n    onChange: handleQuantity,\n    products: props.user.cartDetail,\n    removeItem: removeFromCart,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 9\n    }\n  }), ShowTotal ? /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      marginTop: \"3rem\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 13\n    }\n  }, \"Total amount: $\", Total, \" \")) : ShowSuccess ? /*#__PURE__*/React.createElement(Result, {\n    status: \"success\",\n    title: \"Successfully Purchased Items\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 11\n    }\n  }) : /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      width: \"100%\",\n      display: \"flex\",\n      flexDirection: \"column\",\n      justifyContent: \"center\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Empty, {\n    description: false,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 15\n    }\n  }, \"No Items In the Cart\")))), ShowTotal && /*#__PURE__*/React.createElement(Paypal, {\n    toPay: Total,\n    onSuccess: transactionSuccess,\n    transactionError: transactionError,\n    transactionCanceled: transactionCanceled,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 9\n    }\n  }));\n}\n\nexport default CartPage;","map":{"version":3,"sources":["/Users/iashir/Desktop/WorkProjects/Store/client/src/components/views/CartPage/CartPage.js"],"names":["React","useEffect","useState","useDispatch","getCartItems","removeCartItem","onSuccessBuy","addToCart","UserCardBlock","Result","Empty","InputNumber","Axios","Paypal","CartPage","props","dispatch","Total","setTotal","ShowTotal","setShowTotal","ShowSuccess","setShowSuccess","cartItems","user","userData","cart","length","forEach","item","push","id","then","response","payload","calculateTotal","cartDetail","total","map","parseInt","price","quantity","removeFromCart","productId","transactionSuccess","data","paymentData","success","transactionError","console","log","transactionCanceled","handleQuantity","value","width","margin","marginTop","display","flexDirection","justifyContent"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport {\n  getCartItems,\n  removeCartItem,\n  onSuccessBuy,\n  addToCart,\n} from \"../../../_actions/user_actions\";\nimport UserCardBlock from \"./Sections/UserCardBlock\";\nimport { Result, Empty, InputNumber } from \"antd\";\nimport Axios from \"axios\";\nimport Paypal from \"../../utils/Paypal\";\nfunction CartPage(props) {\n  const dispatch = useDispatch();\n  const [Total, setTotal] = useState(0);\n  const [ShowTotal, setShowTotal] = useState(false);\n  const [ShowSuccess, setShowSuccess] = useState(false);\n\n  useEffect(() => {\n    let cartItems = [];\n    if (props.user.userData && props.user.userData.cart) {\n      if (props.user.userData.cart.length > 0) {\n        props.user.userData.cart.forEach((item) => {\n          cartItems.push(item.id);\n        });\n        dispatch(getCartItems(cartItems, props.user.userData.cart)).then(\n          (response) => {\n            if (response.payload.length > 0) {\n              calculateTotal(response.payload);\n            }\n          }\n        );\n      }\n    }\n  }, [props.user.userData]);\n\n  const calculateTotal = (cartDetail) => {\n    let total = 0;\n\n    cartDetail.map((item) => {\n      total += parseInt(item.price, 10) * item.quantity;\n    });\n\n    setTotal(total);\n    setShowTotal(true);\n  };\n\n  const removeFromCart = (productId) => {\n    dispatch(removeCartItem(productId)).then((response) => {\n      if (response.payload.cartDetail.length <= 0) {\n        setShowTotal(false);\n      } else {\n        calculateTotal(response.payload.cartDetail);\n      }\n    });\n  };\n\n  const transactionSuccess = (data) => {\n    dispatch(\n      onSuccessBuy({\n        cartDetail: props.user.cartDetail,\n        paymentData: data,\n      })\n    ).then((response) => {\n      if (response.payload.success) {\n        setShowSuccess(true);\n        setShowTotal(false);\n      }\n    });\n  };\n\n  const transactionError = () => {\n    console.log(\"Paypal error\");\n  };\n\n  const transactionCanceled = () => {\n    console.log(\"Transaction canceled\");\n  };\n\n  const handleQuantity = (value)=>{\n    dispatch(addToCart)\n  }\n  return (\n    <div style={{ width: \"85%\", margin: \"3rem auto\" }}>\n      <h1>My Cart</h1>\n      <div>\n        <UserCardBlock\n          onChange={handleQuantity}\n          products={props.user.cartDetail}\n          removeItem={removeFromCart}\n        />\n\n        {ShowTotal ? (\n          <div style={{ marginTop: \"3rem\" }}>\n            <h2>Total amount: ${Total} </h2>\n          </div>\n        ) : ShowSuccess ? (\n          <Result status=\"success\" title=\"Successfully Purchased Items\" />\n        ) : (\n          <div\n            style={{\n              width: \"100%\",\n              display: \"flex\",\n              flexDirection: \"column\",\n              justifyContent: \"center\",\n            }}\n          >\n            <br />\n            <Empty description={false}>\n              <p>No Items In the Cart</p>\n            </Empty>\n          </div>\n        )}\n      </div>\n\n      {/* Paypal Button */}\n\n      {ShowTotal && (\n        <Paypal\n          toPay={Total}\n          onSuccess={transactionSuccess}\n          transactionError={transactionError}\n          transactionCanceled={transactionCanceled}\n        />\n      )}\n    </div>\n  );\n}\n\nexport default CartPage;\n"]},"metadata":{},"sourceType":"module"}