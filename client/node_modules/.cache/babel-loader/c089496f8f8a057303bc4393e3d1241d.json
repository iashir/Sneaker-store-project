{"ast":null,"code":"var _jsxFileName = \"/Users/iashir/Desktop/WorkProjects/Store/client/src/components/views/LandingPage/LandingPage.js\";\nimport React, { useEffect, useState } from \"react\";\nimport Axios from \"axios\";\nimport { Icon, Col, Card, Row, Divider, Button } from \"antd\";\nimport ImageSlider from \"../../utils/ImageSlider\";\nimport CheckBox from \"./Sections/CheckBox\";\nimport RadioBox from \"./Sections/RadioBox\";\nimport { continents, price, Types, Genders, Sizes, Brands } from \"./Sections/Datas\";\nimport SearchFeature from \"./Sections/SearchFeature\";\nconst {\n  Meta\n} = Card;\n\nfunction LandingPage() {\n  const [Products, setProducts] = useState([]);\n  const [Skip, setSkip] = useState(0);\n  const [reset, setReset] = useState(false);\n  const [Limit, setLimit] = useState(8);\n  const [PostSize, setPostSize] = useState();\n  const [SearchTerms, setSearchTerms] = useState(\"\");\n  const [Filters, setFilters] = useState({\n    type: [],\n    gender: [],\n    brand: [],\n    price: []\n  });\n  useEffect(() => {\n    const variables = {\n      skip: Skip,\n      limit: Limit\n    };\n    getProducts(variables);\n  }, []);\n\n  const getProducts = variables => {\n    console.log(variables);\n    Axios.post(\"/api/product/getProducts\", variables).then(response => {\n      if (response.data.success) {\n        if (variables.loadMore) {\n          setProducts([...Products, ...response.data.products]);\n        } else {\n          setProducts(response.data.products);\n        }\n\n        setPostSize(response.data.postSize);\n      } else {\n        alert(\"Failed to fectch product datas\");\n      }\n    });\n  };\n\n  const onLoadMore = () => {\n    let skip = Skip + Limit;\n    const variables = {\n      skip: skip,\n      limit: Limit,\n      loadMore: true,\n      filters: Filters,\n      searchTerm: SearchTerms\n    };\n    getProducts(variables);\n    setSkip(skip);\n  };\n\n  const renderCards = Products.map((product, index) => {\n    return /*#__PURE__*/React.createElement(Col, {\n      lg: 6,\n      md: 8,\n      sm: 8,\n      xs: 24,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Card, {\n      hoverable: true,\n      cover: /*#__PURE__*/React.createElement(\"a\", {\n        href: `/product/${product._id}`,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 13\n        }\n      }, \" \", /*#__PURE__*/React.createElement(ImageSlider, {\n        images: product.images,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 15\n        }\n      })),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Meta, {\n      title: product.title,\n      description: `Price: $${product.price} `,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(Meta, {\n      description: `Type: ${product.type}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(Meta, {\n      description: `Gender: ${product.gender}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(Meta, {\n      description: `Brand: ${product.brand}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(Meta, {\n      description: `Sizes: ${product.size.map(data => data)}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 11\n      }\n    })));\n  });\n\n  const showFilteredResults = filters => {\n    const variables = {\n      skip: 0,\n      limit: Limit,\n      filters: filters\n    };\n    getProducts(variables);\n    setSkip(0);\n  };\n\n  const handlePrice = value => {\n    const data = price;\n    let array = [];\n\n    for (let key in data) {\n      if (data[key]._id === parseInt(value, 10)) {\n        array = data[key].array;\n      }\n    }\n\n    console.log(\"array\", array);\n    return array;\n  };\n\n  const handleFilters = (filters, category) => {\n    const newFilters = { ...Filters\n    };\n    const arr = [];\n\n    if (category === \"price\") {\n      newFilters[category] = filters;\n    } else {\n      newFilters[category] = filters.map(data => data.name);\n    }\n\n    if (category === \"price\") {\n      let priceValues = handlePrice(filters);\n      newFilters[category] = priceValues;\n    }\n\n    console.log(newFilters);\n    showFilteredResults(newFilters);\n    setFilters(newFilters);\n  };\n\n  const handleRecet = () => {\n    showFilteredResults({});\n    setFilters({});\n    setReset(!res);\n  };\n\n  const updateSearchTerms = newSearchTerm => {\n    const variables = {\n      skip: 0,\n      limit: Limit,\n      filters: Filters,\n      searchTerm: newSearchTerm\n    };\n    setSkip(0);\n    setSearchTerms(newSearchTerm);\n    getProducts(variables);\n  };\n\n  return /*#__PURE__*/React.createElement(Row, {\n    gutter: [16, 16],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    className: \"gutter-row\",\n    xs: 24,\n    md: 6,\n    style: {\n      height: \"100% \"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(CheckBox, {\n    list: Brands,\n    filters: Filters,\n    name: \"Brands\",\n    handleFilters: filters => handleFilters(filters, \"brand\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(CheckBox, {\n    list: Genders,\n    filters: Filters,\n    name: \"Genders\",\n    handleFilters: filters => handleFilters(filters, \"gender\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(CheckBox, {\n    list: Types,\n    reset: reset,\n    name: \"Types\",\n    handleFilters: filters => handleFilters(filters, \"type\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(RadioBox, {\n    list: price,\n    filters: Filters.price,\n    handleFilters: filters => handleFilters(filters, \"price\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    onClick: handleRecet,\n    type: \"primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 9\n    }\n  }, \"Recet All\")), /*#__PURE__*/React.createElement(Col, {\n    className: \"gutter-row\",\n    xs: 24,\n    md: 18,\n    style: {\n      padding: \"0rem 2rem 0rem 2rem\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: \"flex\",\n      justifyContent: \"flex-end\",\n      margin: \"1rem auto\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(SearchFeature, {\n    refreshFunction: updateSearchTerms,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 11\n    }\n  })), Products.length === 0 ? /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: \"flex\",\n      height: \"300px\",\n      justifyContent: \"center\",\n      alignItems: \"center\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 13\n    }\n  }, \"No post yet...\")) : /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    gutter: [16, 16],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 13\n    }\n  }, renderCards)), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 9\n    }\n  }), PostSize >= Limit && /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: \"flex\",\n      justifyContent: \"center\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: onLoadMore,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 13\n    }\n  }, \"Load More\"))));\n}\n\nexport default LandingPage;","map":{"version":3,"sources":["/Users/iashir/Desktop/WorkProjects/Store/client/src/components/views/LandingPage/LandingPage.js"],"names":["React","useEffect","useState","Axios","Icon","Col","Card","Row","Divider","Button","ImageSlider","CheckBox","RadioBox","continents","price","Types","Genders","Sizes","Brands","SearchFeature","Meta","LandingPage","Products","setProducts","Skip","setSkip","reset","setReset","Limit","setLimit","PostSize","setPostSize","SearchTerms","setSearchTerms","Filters","setFilters","type","gender","brand","variables","skip","limit","getProducts","console","log","post","then","response","data","success","loadMore","products","postSize","alert","onLoadMore","filters","searchTerm","renderCards","map","product","index","_id","images","title","size","showFilteredResults","handlePrice","value","array","key","parseInt","handleFilters","category","newFilters","arr","name","priceValues","handleRecet","res","updateSearchTerms","newSearchTerm","height","padding","display","justifyContent","margin","length","alignItems"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport Axios from \"axios\";\nimport { Icon, Col, Card, Row, Divider, Button } from \"antd\";\nimport ImageSlider from \"../../utils/ImageSlider\";\nimport CheckBox from \"./Sections/CheckBox\";\nimport RadioBox from \"./Sections/RadioBox\";\nimport {\n  continents,\n  price,\n  Types,\n  Genders,\n  Sizes,\n  Brands,\n} from \"./Sections/Datas\";\nimport SearchFeature from \"./Sections/SearchFeature\";\n\nconst { Meta } = Card;\n\nfunction LandingPage() {\n  const [Products, setProducts] = useState([]);\n  const [Skip, setSkip] = useState(0);\n  const [reset, setReset] = useState(false);\n  const [Limit, setLimit] = useState(8);\n  const [PostSize, setPostSize] = useState();\n  const [SearchTerms, setSearchTerms] = useState(\"\");\n\n  const [Filters, setFilters] = useState({\n    type: [],\n    gender: [],\n    brand: [],\n    price: [],\n  });\n\n  useEffect(() => {\n    const variables = {\n      skip: Skip,\n      limit: Limit,\n    };\n\n    getProducts(variables);\n  }, []);\n\n  const getProducts = (variables) => {\n    console.log(variables);\n    Axios.post(\"/api/product/getProducts\", variables).then((response) => {\n      if (response.data.success) {\n        if (variables.loadMore) {\n          setProducts([...Products, ...response.data.products]);\n        } else {\n          setProducts(response.data.products);\n        }\n        setPostSize(response.data.postSize);\n      } else {\n        alert(\"Failed to fectch product datas\");\n      }\n    });\n  };\n\n  const onLoadMore = () => {\n    let skip = Skip + Limit;\n\n    const variables = {\n      skip: skip,\n      limit: Limit,\n      loadMore: true,\n      filters: Filters,\n      searchTerm: SearchTerms,\n    };\n    getProducts(variables);\n    setSkip(skip);\n  };\n\n  const renderCards = Products.map((product, index) => {\n    return (\n      <Col lg={6} md={8} sm={8} xs={24}>\n        <Card\n          hoverable={true}\n          cover={\n            <a href={`/product/${product._id}`}>\n              {\" \"}\n              <ImageSlider images={product.images} />\n            </a>\n          }\n        >\n          <Meta\n            title={product.title}\n            description={`Price: $${product.price} `}\n          />\n          <Meta description={`Type: ${product.type}`} />\n          <Meta description={`Gender: ${product.gender}`} />\n          <Meta description={`Brand: ${product.brand}`} />\n          <Meta description={`Sizes: ${product.size.map((data) => data)}`} />\n        </Card>\n      </Col>\n    );\n  });\n\n  const showFilteredResults = (filters) => {\n    const variables = {\n      skip: 0,\n      limit: Limit,\n      filters: filters,\n    };\n    getProducts(variables);\n    setSkip(0);\n  };\n\n  const handlePrice = (value) => {\n    const data = price;\n    let array = [];\n\n    for (let key in data) {\n      if (data[key]._id === parseInt(value, 10)) {\n        array = data[key].array;\n      }\n    }\n    console.log(\"array\", array);\n    return array;\n  };\n\n  const handleFilters = (filters, category) => {\n    const newFilters = { ...Filters };\n    const arr = [];\n\n    if (category === \"price\") {\n      newFilters[category] = filters;\n    } else {\n      newFilters[category] = filters.map((data) => data.name);\n    }\n\n    if (category === \"price\") {\n      let priceValues = handlePrice(filters);\n      newFilters[category] = priceValues;\n    }\n\n    console.log(newFilters);\n\n    showFilteredResults(newFilters);\n    setFilters(newFilters);\n  };\n\n  const handleRecet = () => {\n    showFilteredResults({});\n    setFilters({});\n    setReset(!res)\n  };\n  const updateSearchTerms = (newSearchTerm) => {\n    const variables = {\n      skip: 0,\n      limit: Limit,\n      filters: Filters,\n      searchTerm: newSearchTerm,\n    };\n\n    setSkip(0);\n    setSearchTerms(newSearchTerm);\n\n    getProducts(variables);\n  };\n\n  return (\n    <Row gutter={[16, 16]}>\n      <Col className=\"gutter-row\" xs={24} md={6} style={{ height: \"100% \" }}>\n        {/* Filter  */}\n\n        <CheckBox\n          list={Brands}\n          filters={Filters}\n          name={\"Brands\"}\n          handleFilters={(filters) => handleFilters(filters, \"brand\")}\n        />\n        <CheckBox\n          list={Genders}\n          filters={Filters}\n          name={\"Genders\"}\n          handleFilters={(filters) => handleFilters(filters, \"gender\")}\n        />\n        <CheckBox\n          list={Types}\n          reset={reset}\n          name={\"Types\"}\n          handleFilters={(filters) => handleFilters(filters, \"type\")}\n        />\n        <RadioBox\n          list={price}\n          filters={Filters.price}\n          handleFilters={(filters) => handleFilters(filters, \"price\")}\n        />\n        <Button onClick={handleRecet} type=\"primary\">\n          Recet All\n        </Button>\n      </Col>\n      <Col\n        className=\"gutter-row\"\n        xs={24}\n        md={18}\n        style={{ padding: \"0rem 2rem 0rem 2rem\" }}\n      >\n        {/* Search  */}\n        <div\n          style={{\n            display: \"flex\",\n            justifyContent: \"flex-end\",\n            margin: \"1rem auto\",\n          }}\n        >\n          <SearchFeature refreshFunction={updateSearchTerms} />\n        </div>\n\n        {Products.length === 0 ? (\n          <div\n            style={{\n              display: \"flex\",\n              height: \"300px\",\n              justifyContent: \"center\",\n              alignItems: \"center\",\n            }}\n          >\n            <h2>No post yet...</h2>\n          </div>\n        ) : (\n          <div>\n            <Row gutter={[16, 16]}>{renderCards}</Row>\n          </div>\n        )}\n        <br />\n        <br />\n\n        {PostSize >= Limit && (\n          <div style={{ display: \"flex\", justifyContent: \"center\" }}>\n            <button onClick={onLoadMore}>Load More</button>\n          </div>\n        )}\n      </Col>\n    </Row>\n  );\n}\n\nexport default LandingPage;\n"]},"metadata":{},"sourceType":"module"}