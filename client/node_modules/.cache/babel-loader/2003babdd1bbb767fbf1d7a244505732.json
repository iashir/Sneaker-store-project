{"ast":null,"code":"var _jsxFileName = \"/Users/iashir/Desktop/WorkProjects/Store/client/src/hoc/auth.js\";\nimport React, { useEffect } from \"react\";\nimport { auth } from \"../_actions/user_actions\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { useCookies } from \"react-cookie\";\nexport default function (ComposedClass, reload, adminRoute = null) {\n  const [cookies, setCookie, removeCookie] = useCookies([\"w\"]);\n\n  function AuthenticationCheck(props) {\n    let user = useSelector(state => state.user);\n    const dispatch = useDispatch();\n    useEffect(() => {\n      dispatch(auth()).then(async response => {\n        if (await !response.payload.isAuth) {\n          removeCookie(\"user\");\n\n          if (reload) {\n            props.history.push(\"/login\");\n          }\n        } else {\n          if (adminRoute && !response.payload.isAdmin) {\n            props.history.push(\"/\");\n          } else {\n            if (reload === false) {\n              props.history.push(\"/\");\n            }\n          }\n        }\n      });\n    }, [dispatch, props.history, user.googleAuth]);\n    return /*#__PURE__*/React.createElement(ComposedClass, Object.assign({}, props, {\n      user: user,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 32,\n        columnNumber: 12\n      }\n    }));\n  }\n\n  return AuthenticationCheck;\n}","map":{"version":3,"sources":["/Users/iashir/Desktop/WorkProjects/Store/client/src/hoc/auth.js"],"names":["React","useEffect","auth","useSelector","useDispatch","useCookies","ComposedClass","reload","adminRoute","cookies","setCookie","removeCookie","AuthenticationCheck","props","user","state","dispatch","then","response","payload","isAuth","history","push","isAdmin","googleAuth"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,IAAT,QAAqB,0BAArB;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AACA,SAASC,UAAT,QAA2B,cAA3B;AAEA,eAAe,UAAUC,aAAV,EAAyBC,MAAzB,EAAiCC,UAAU,GAAG,IAA9C,EAAoD;AACjE,QAAM,CAACC,OAAD,EAAUC,SAAV,EAAqBC,YAArB,IAAqCN,UAAU,CAAC,CAAC,GAAD,CAAD,CAArD;;AAEA,WAASO,mBAAT,CAA6BC,KAA7B,EAAoC;AAClC,QAAIC,IAAI,GAAGX,WAAW,CAAEY,KAAD,IAAWA,KAAK,CAACD,IAAlB,CAAtB;AACA,UAAME,QAAQ,GAAGZ,WAAW,EAA5B;AAEAH,IAAAA,SAAS,CAAC,MAAM;AACde,MAAAA,QAAQ,CAACd,IAAI,EAAL,CAAR,CAAiBe,IAAjB,CAAsB,MAAOC,QAAP,IAAoB;AACxC,YAAI,MAAM,CAACA,QAAQ,CAACC,OAAT,CAAiBC,MAA5B,EAAoC;AAClCT,UAAAA,YAAY,CAAC,MAAD,CAAZ;;AACA,cAAIJ,MAAJ,EAAY;AACVM,YAAAA,KAAK,CAACQ,OAAN,CAAcC,IAAd,CAAmB,QAAnB;AACD;AACF,SALD,MAKO;AACL,cAAId,UAAU,IAAI,CAACU,QAAQ,CAACC,OAAT,CAAiBI,OAApC,EAA6C;AAC3CV,YAAAA,KAAK,CAACQ,OAAN,CAAcC,IAAd,CAAmB,GAAnB;AACD,WAFD,MAEO;AACL,gBAAIf,MAAM,KAAK,KAAf,EAAsB;AACpBM,cAAAA,KAAK,CAACQ,OAAN,CAAcC,IAAd,CAAmB,GAAnB;AACD;AACF;AACF;AACF,OAfD;AAgBD,KAjBQ,EAiBN,CAACN,QAAD,EAAWH,KAAK,CAACQ,OAAjB,EAA0BP,IAAI,CAACU,UAA/B,CAjBM,CAAT;AAmBA,wBAAO,oBAAC,aAAD,oBAAmBX,KAAnB;AAA0B,MAAA,IAAI,EAAEC,IAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAP;AACD;;AACD,SAAOF,mBAAP;AACD","sourcesContent":["import React, { useEffect } from \"react\";\nimport { auth } from \"../_actions/user_actions\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { useCookies } from \"react-cookie\";\n\nexport default function (ComposedClass, reload, adminRoute = null) {\n  const [cookies, setCookie, removeCookie] = useCookies([\"w\"]);\n\n  function AuthenticationCheck(props) {\n    let user = useSelector((state) => state.user);\n    const dispatch = useDispatch();\n\n    useEffect(() => {\n      dispatch(auth()).then(async (response) => {\n        if (await !response.payload.isAuth) {\n          removeCookie(\"user\");\n          if (reload) {\n            props.history.push(\"/login\");\n          }\n        } else {\n          if (adminRoute && !response.payload.isAdmin) {\n            props.history.push(\"/\");\n          } else {\n            if (reload === false) {\n              props.history.push(\"/\");\n            }\n          }\n        }\n      });\n    }, [dispatch, props.history, user.googleAuth]);\n\n    return <ComposedClass {...props} user={user} />;\n  }\n  return AuthenticationCheck;\n}\n"]},"metadata":{},"sourceType":"module"}